@page "/taxonomias"
@using Frontend.Services
@using Common.Dtos.Taxonomias
@inject ITaxonomiasService TaxonomiasService
@inject NavigationManager Navigation

<h3>Taxonomias</h3>

@if (taxonomias == null)
{
    <p>Loading taxonomias...</p>
}
else if (!taxonomias.Any())
{
    <p>Sem taxonomias disponíveis.</p>
}
else
{
    <ul>
        @foreach (var taxonomia in taxonomias)
        {
            <li>
                <h4>@taxonomia.VerticalName</h4>
                <p>@taxonomia.RoleVerticals.Count roles, @taxonomia.VerticalUsers.Count users</p>
            </li>
        }
    </ul>
}

<a @onclick="NavigateToCreate">Create New Taxonomia</a>

@code {
    private List<VerticalDto> taxonomias;

    protected override async Task OnInitializedAsync()
    {
        taxonomias = await TaxonomiasService.GetTaxonomiasAsync();
    }

    private void NavigateToCreate()
    {
        Navigation.NavigateTo("/taxonomias/create");
    }
}

